{% extends "base.html" %}

{% block title %}Process Designer - LMS Core{% endblock %}

{% block content %}
<div class="container mx-auto px-4 py-8">
    <!-- Enhanced Page Header -->
    <div class="page-header mb-8">
        <div class="page-header-content">
            <div>
                <h1 class="page-title">Process Designer</h1>
                <p class="page-subtitle">Create, manage, and execute process workflows for your bioreactors</p>
            </div>
            <div class="header-actions">
                <button class="btn btn-secondary">
                    üìä Analytics
                </button>
                <button class="btn btn-secondary">
                    üìã Templates
                </button>
                <a href="/app/processes/create" class="btn btn-primary">
                    ‚ûï Create Process
                </a>
            </div>
        </div>
    </div>

    <!-- Enhanced Controls -->
    <form method="GET" class="controls-section mb-6">
        <div class="controls-content">
            <div class="search-filters">
                <div class="search-box">
                    <div class="search-icon">üîç</div>
                    <input type="text" class="search-input" placeholder="Search processes..." name="search" value="{{ filters.search or '' }}">
                </div>
                <select name="process_type" class="filter-select">
                    <option value="">All Types</option>
                    {% for process_type in process_types %}
                    <option value="{{ process_type }}" {% if filters.process_type == process_type %}selected{% endif %}>
                        {{ process_type.replace('_', ' ').title() }}
                    </option>
                    {% endfor %}
                </select>
                <select name="status" class="filter-select">
                    <option value="">All Statuses</option>
                    {% for status in statuses %}
                    <option value="{{ status }}" {% if filters.status == status %}selected{% endif %}>
                        {{ status.replace('_', ' ').title() }}
                    </option>
                    {% endfor %}
                </select>
                <select name="is_template" class="filter-select">
                    <option value="">All</option>
                    <option value="true" {% if filters.is_template == 'true' %}selected{% endif %}>Templates Only</option>
                    <option value="false" {% if filters.is_template == 'false' %}selected{% endif %}>Processes Only</option>
                </select>
                <button type="submit" class="btn btn-primary">
                    Filter
                </button>
            </div>
            <div class="view-toggles">
                <button type="button" class="view-toggle active" id="grid-view" title="Grid View">‚öè</button>
                <button type="button" class="view-toggle" id="list-view" title="List View">‚ò∞</button>
            </div>
        </div>
    </form>

    <!-- Error Message -->
    {% if error %}
    <div class="alert alert-error mb-6">
        <p>{{ error }}</p>
    </div>
    {% endif %}

    <!-- Processes Grid View -->
    {% if processes %}
    <div class="processes-grid" id="processes-grid">
        {% for process in processes %}
        <div class="process-card">
            <div class="process-header">
                <div class="process-status status-{{ process.status }}">
                    ‚óè {{ process.status.replace('_', ' ').title() }}
                </div>
                {% if process.is_template %}
                <div class="process-template-badge">Template</div>
                {% endif %}
                <h3 class="process-name">{{ process.name }}</h3>
                {% if process.description %}
                <p class="process-description">{{ process.description }}</p>
                {% endif %}
                <div class="process-progress">
                    <div class="progress-label">
                        <span>Status</span>
                        <span>{{ process.status.replace('_', ' ').title() }}</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: {% if process.status == 'active' %}100{% elif process.status == 'draft' %}25{% elif process.status == 'archived' %}0{% else %}50{% endif %}%"></div>
                    </div>
                </div>
            </div>
            
            <div class="process-stats">
                <div class="stat">
                    <span class="stat-number">{{ process.step_count }}</span>
                    <span class="stat-label">Steps</span>
                </div>
                <div class="stat">
                    <span class="stat-number">{{ process.version }}</span>
                    <span class="stat-label">Version</span>
                </div>
                <div class="stat">
                    <span class="stat-number">{{ process.process_type.replace('_', ' ').title() }}</span>
                    <span class="stat-label">Type</span>
                </div>
            </div>
            
            <div class="process-details">
                <div class="detail-item">
                    <span class="detail-label">Type:</span>
                    <span class="detail-value">{{ process.process_type.replace('_', ' ').title() }}</span>
                </div>
                
                <div class="detail-item">
                    <span class="detail-label">Version:</span>
                    <span class="detail-value">{{ process.version }}</span>
                </div>
                
                {% if process.estimated_duration %}
                <div class="detail-item">
                    <span class="detail-label">Duration:</span>
                    <span class="detail-value">{{ process.estimated_duration }} min</span>
                </div>
                {% endif %}
                
                <div class="detail-item">
                    <span class="detail-label">Updated:</span>
                    <span class="detail-value">{{ process.updated_at.strftime('%Y-%m-%d') if process.updated_at else 'N/A' }}</span>
                </div>
            </div>
            
            <div class="process-footer">
                <div class="process-info">
                    {% if process.is_template %}
                    <span class="template-badge">Template</span>
                    {% endif %}
                    
                    {% if process.estimated_duration %}
                    <span class="duration-info">{{ process.estimated_duration }} min</span>
                    {% endif %}
                </div>
                <div class="process-actions">
                    <a href="/app/processes/{{ process.id }}" class="action-btn" title="View Details">üëÅÔ∏è</a>
                    <a href="/app/processes/{{ process.id }}/edit" class="action-btn" title="Edit">‚úèÔ∏è</a>
                    {% if process.status != 'archived' %}
                    <form method="POST" action="/app/processes/{{ process.id }}/archive" class="inline-form">
                        <button type="submit" class="action-btn danger" title="Archive" 
                                onclick="return confirm('Are you sure you want to archive this process?')">
                            üóÑÔ∏è
                        </button>
                    </form>
                    {% endif %}
                </div>
            </div>
        </div>
        {% endfor %}
    </div>

    <!-- Processes List View -->
    <div class="processes-list" id="processes-list" style="display: none;">
        <div class="list-header">
            <div>Process Name</div>
            <div>Type</div>
            <div>Status</div>
            <div>Steps</div>
            <div>Version</div>
            <div>Actions</div>
        </div>
        {% for process in processes %}
        <div class="process-row">
            <div class="process-info">
                <strong>{{ process.name }}</strong>
                {% if process.description %}
                <br>
                <small class="process-desc">{{ process.description[:50] }}{% if process.description|length > 50 %}...{% endif %}</small>
                {% endif %}
                {% if process.is_template %}
                <span class="template-badge-small">Template</span>
                {% endif %}
            </div>
            <div>{{ process.process_type.replace('_', ' ').title() }}</div>
            <div><span class="status-{{ process.status }}">‚óè {{ process.status.replace('_', ' ').title() }}</span></div>
            <div>{{ process.step_count }}</div>
            <div>{{ process.version }}</div>
            <div class="process-actions">
                <a href="/app/processes/{{ process.id }}" class="action-btn" title="View">üëÅÔ∏è</a>
                <a href="/app/processes/{{ process.id }}/edit" class="action-btn" title="Edit">‚úèÔ∏è</a>
            </div>
        </div>
        {% endfor %}
    </div>

    <!-- Pagination -->
    {% if total > per_page %}
    <div class="pagination">
        <div class="pagination-info">
            Showing {{ (page - 1) * per_page + 1 }} to 
            {{ page * per_page if page * per_page < total else total }} 
            of {{ total }} processes
        </div>
        
        <div class="pagination-controls">
            {% if page > 1 %}
            <a href="?page={{ page - 1 }}{% if filters.search %}&search={{ filters.search }}{% endif %}{% if filters.process_type %}&process_type={{ filters.process_type }}{% endif %}{% if filters.status %}&status={{ filters.status }}{% endif %}{% if filters.is_template %}&is_template={{ filters.is_template }}{% endif %}" 
               class="btn btn-sm btn-outline">Previous</a>
            {% endif %}
            
            <span class="page-info">Page {{ page }} of {{ (total + per_page - 1) // per_page }}</span>
            
            {% if page * per_page < total %}
            <a href="?page={{ page + 1 }}{% if filters.search %}&search={{ filters.search }}{% endif %}{% if filters.process_type %}&process_type={{ filters.process_type }}{% endif %}{% if filters.status %}&status={{ filters.status }}{% endif %}{% if filters.is_template %}&is_template={{ filters.is_template }}{% endif %}" 
               class="btn btn-sm btn-outline">Next</a>
            {% endif %}
        </div>
    </div>
    {% endif %}

    {% else %}
    <!-- Enhanced Empty State -->
    <div class="empty-state">
        <div class="empty-icon">
            <svg class="w-16 h-16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                      d="M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path>
            </svg>
        </div>
        <h3 class="empty-title">No processes found</h3>
        <p class="empty-description">
            {% if filters.search or filters.process_type or filters.status or filters.is_template %}
            Try adjusting your filters to see more results.
            {% else %}
            Create your first process to begin designing workflows for your bioreactors.
            {% endif %}
        </p>
        <a href="/app/processes/create" class="btn btn-primary">
            Create Process
        </a>
    </div>
    {% endif %}
</div>

<style>
/* CSS Variables */
:root {
    --primary: #6aff93;
    --primary-dark: #4ade80;
    --primary-light: #86efac;
    --secondary: #40e0d0;
    --secondary-dark: #20b2aa;
    --secondary-light: #5eead4;
    --bg-primary: #ffffff;
    --bg-secondary: #f8fafc;
    --bg-tertiary: #f1f5f9;
    --bg-elevated: #ffffff;
    --text-primary: #1e293b;
    --text-secondary: #64748b;
    --text-tertiary: #94a3b8;
    --text-inverse: #ffffff;
    --border-light: #e2e8f0;
    --border-medium: #cbd5e1;
    --danger: #ef4444;
    --danger-light: #fef2f2;
    --success: #22c55e;
    --success-light: #f0fdf4;
    --warning: #f59e0b;
    --warning-light: #fffbeb;
    --info: #3b82f6;
    --info-light: #eff6ff;
    --space-xs: 0.25rem;
    --space-sm: 0.5rem;
    --space-md: 1rem;
    --space-lg: 1.5rem;
    --space-xl: 2rem;
    --space-2xl: 3rem;
    --space-3xl: 4rem;
    --space-4xl: 6rem;
    --space-6: 1.5rem;
    --space-8: 2rem;
    --space-16: 4rem;
    --radius-sm: 6px;
    --radius-md: 8px;
    --radius-lg: 12px;
    --radius-xl: 16px;
    --shadow-sm: 0 1px 3px rgba(0,0,0,0.1);
    --shadow-md: 0 4px 12px rgba(0,0,0,0.15);
    --shadow-lg: 0 10px 30px rgba(106, 255, 147, 0.2);
    --font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    --font-size-xs: 0.75rem;
    --font-size-sm: 0.875rem;
    --font-size-base: 1rem;
    --font-size-lg: 1.125rem;
    --font-size-xl: 1.25rem;
    --font-size-2xl: 1.5rem;
    --font-size-3xl: 1.875rem;
    --font-size-4xl: 2.25rem;
    --transition-normal: 0.3s ease;
}

/* Enhanced Page Header */
.page-header {
    background: linear-gradient(135deg, var(--secondary), var(--primary));
    border-radius: var(--radius-xl);
    position: relative;
    overflow: hidden;
    padding: var(--space-8);
    margin-bottom: var(--space-8);
}

.page-header::before {
    content: '';
    position: absolute;
    top: -50px;
    right: -50px;
    width: 150px;
    height: 150px;
    background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
    border-radius: 50%;
}

.page-header::after {
    content: '';
    position: absolute;
    bottom: -30px;
    left: -30px;
    width: 100px;
    height: 100px;
    background: radial-gradient(circle, rgba(255,255,255,0.08) 0%, transparent 70%);
    border-radius: 50%;
}

.page-header-content {
    display: flex;
    justify-content: space-between;
    align-items: center;
    position: relative;
    z-index: 10;
}

.page-title {
    color: var(--text-inverse);
    font-size: var(--font-size-4xl);
    font-weight: 700;
    margin-bottom: var(--space-2);
}

.page-subtitle {
    color: rgba(255,255,255,0.9);
    font-size: var(--font-size-lg);
    font-weight: 400;
}

.header-actions {
    display: flex;
    gap: var(--space-4);
}

/* Enhanced Controls */
.controls-section {
    background: var(--bg-elevated);
    border-radius: var(--radius-xl);
    box-shadow: var(--shadow-md);
    margin-bottom: var(--space-6);
    border: 1px solid var(--border-light);
}

.controls-content {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.search-filters {
    display: flex;
    gap: var(--space-4);
    align-items: center;
}

.search-box {
    position: relative;
}

.search-input {
    padding: var(--space-3) var(--space-4) var(--space-3) var(--space-10);
    border: 1px solid var(--border-medium);
    border-radius: var(--radius-lg);
    width: 300px;
    font-family: var(--font-family);
    font-size: var(--font-size-base);
}

.search-input:focus {
    outline: none;
    border-color: var(--primary);
    box-shadow: 0 0 0 3px rgba(106, 255, 147, 0.1);
}

.search-icon {
    position: absolute;
    left: var(--space-3);
    top: 50%;
    transform: translateY(-50%);
    color: var(--text-tertiary);
}

.filter-select {
    padding: var(--space-3) var(--space-4);
    border: 1px solid var(--border-medium);
    border-radius: var(--radius-lg);
    background: var(--bg-primary);
    font-family: var(--font-family);
    font-size: var(--font-size-base);
}

.filter-select:focus {
    outline: none;
    border-color: var(--primary);
    box-shadow: 0 0 0 3px rgba(106, 255, 147, 0.1);
}

.view-toggles {
    display: flex;
    gap: var(--space-2);
}

.view-toggle {
    padding: var(--space-2);
    border: 1px solid var(--border-medium);
    background: var(--bg-primary);
    border-radius: var(--radius-md);
    cursor: pointer;
    transition: all var(--transition-normal);
    font-size: var(--font-size-lg);
}

.view-toggle.active {
    background: var(--primary);
    border-color: var(--primary);
    color: var(--text-inverse);
}

.view-toggle:hover {
    border-color: var(--primary);
}

/* Enhanced Process Cards */
.processes-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(400px, 1fr));
    gap: var(--space-6);
}

.process-card {
    background: var(--bg-elevated);
    border-radius: var(--radius-xl);
    box-shadow: var(--shadow-md);
    overflow: hidden;
    transition: all var(--transition-normal);
    border: 1px solid var(--border-light);
}

.process-card:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-lg);
    border-color: var(--primary);
}

.process-header {
    padding: var(--space-6);
    position: relative;
}

.process-status {
    position: absolute;
    top: var(--space-4);
    right: var(--space-4);
    padding: var(--space-1) var(--space-3);
    border-radius: 20px;
    font-size: var(--font-size-xs);
    font-weight: 500;
}

.status-active {
    background: var(--success-light);
    color: var(--success);
}

.status-draft {
    background: var(--warning-light);
    color: var(--warning);
}

.status-archived {
    background: var(--bg-tertiary);
    color: var(--text-tertiary);
}

.process-template-badge {
    position: absolute;
    top: var(--space-4);
    left: var(--space-4);
    padding: var(--space-1) var(--space-3);
    background: rgba(168, 85, 247, 0.1);
    color: #a855f7;
    border: 1px solid rgba(168, 85, 247, 0.2);
    border-radius: var(--radius-sm);
    font-size: var(--font-size-xs);
    font-weight: 500;
}

.process-name {
    font-size: var(--font-size-xl);
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: var(--space-2);
    margin-top: var(--space-6);
}

.process-description {
    color: var(--text-secondary);
    font-size: var(--font-size-sm);
    line-height: 1.5;
    margin-bottom: var(--space-4);
}

.process-progress {
    margin-bottom: var(--space-4);
}

.progress-label {
    display: flex;
    justify-content: space-between;
    font-size: var(--font-size-xs);
    color: var(--text-secondary);
    margin-bottom: var(--space-2);
}

.progress-bar {
    width: 100%;
    height: 6px;
    background: var(--bg-tertiary);
    border-radius: 3px;
    overflow: hidden;
}

.progress-fill {
    height: 100%;
    background: linear-gradient(90deg, var(--primary), var(--secondary));
    transition: width 0.3s ease;
}

.process-stats {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: var(--space-4);
    padding: var(--space-4) var(--space-6);
    background: var(--bg-secondary);
    border-top: 1px solid var(--border-light);
}

.stat {
    text-align: center;
}

.stat-number {
    display: block;
    font-size: var(--font-size-xl);
    font-weight: 600;
    color: var(--text-primary);
}

.stat-label {
    font-size: var(--font-size-xs);
    color: var(--text-secondary);
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.process-details {
    padding: var(--space-4) var(--space-6);
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: var(--space-4);
    border-top: 1px solid var(--border-light);
}

.detail-item {
    display: flex;
    flex-direction: column;
    gap: var(--space-1);
}

.detail-label {
    font-size: var(--font-size-xs);
    color: var(--text-secondary);
    font-weight: 500;
}

.detail-value {
    font-size: var(--font-size-sm);
    color: var(--text-primary);
    font-weight: 600;
}

.process-footer {
    padding: var(--space-4) var(--space-6);
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-top: 1px solid var(--border-light);
}

.process-info {
    display: flex;
    flex-direction: column;
    gap: var(--space-1);
}

.template-badge {
    display: inline-block;
    padding: var(--space-1) var(--space-2);
    background: rgba(168, 85, 247, 0.1);
    color: #a855f7;
    border: 1px solid rgba(168, 85, 247, 0.2);
    border-radius: var(--radius-sm);
    font-size: var(--font-size-xs);
    font-weight: 500;
}

.duration-info {
    font-size: var(--font-size-xs);
    color: var(--text-secondary);
}

.process-actions {
    display: flex;
    gap: var(--space-2);
}

.action-btn {
    padding: var(--space-2);
    border: 1px solid var(--border-medium);
    background: var(--bg-primary);
    border-radius: var(--radius-md);
    cursor: pointer;
    transition: all var(--transition-normal);
    color: var(--text-secondary);
    text-decoration: none;
    display: inline-flex;
    align-items: center;
    justify-content: center;
}

.action-btn:hover {
    border-color: var(--primary);
    color: var(--primary);
    transform: translateY(-1px);
}

.action-btn.danger:hover {
    border-color: var(--danger);
    color: var(--danger);
}

.inline-form {
    display: inline;
}

/* List View */
.processes-list {
    background: var(--bg-elevated);
    border-radius: var(--radius-xl);
    box-shadow: var(--shadow-md);
    overflow: hidden;
    border: 1px solid var(--border-light);
}

.list-header {
    display: grid;
    grid-template-columns: 2fr 1fr 120px 80px 80px 80px;
    gap: var(--space-4);
    padding: var(--space-4) var(--space-6);
    background: var(--bg-secondary);
    font-weight: 600;
    color: var(--text-primary);
    font-size: var(--font-size-xs);
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.process-row {
    display: grid;
    grid-template-columns: 2fr 1fr 120px 80px 80px 80px;
    gap: var(--space-4);
    padding: var(--space-4) var(--space-6);
    border-bottom: 1px solid var(--border-light);
    align-items: center;
    transition: all var(--transition-normal);
}

.process-row:hover {
    background: var(--bg-secondary);
}

.process-info strong {
    color: var(--text-primary);
    font-weight: 600;
}

.process-desc {
    color: var(--text-secondary);
}

.template-badge-small {
    display: inline-block;
    padding: 2px 6px;
    background: rgba(168, 85, 247, 0.1);
    color: #a855f7;
    border: 1px solid rgba(168, 85, 247, 0.2);
    border-radius: var(--radius-sm);
    font-size: var(--font-size-xs);
    font-weight: 500;
    margin-left: var(--space-2);
}

/* Empty State */
.empty-state {
    text-align: center;
    padding: var(--space-16) var(--space-8);
}

.empty-icon {
    width: 96px;
    height: 96px;
    background: var(--bg-secondary);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto var(--space-6);
    color: var(--text-tertiary);
}

.empty-title {
    font-size: var(--font-size-2xl);
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: var(--space-2);
}

.empty-description {
    color: var(--text-secondary);
    margin-bottom: var(--space-6);
    font-size: var(--font-size-lg);
}

/* Alert Styles */
.alert {
    padding: var(--space-4);
    border-radius: var(--radius-lg);
    margin-bottom: var(--space-6);
}

.alert-error {
    background: var(--danger-light);
    color: var(--danger);
    border: 1px solid var(--danger);
}

/* Button Styles */
.btn {
    padding: var(--space-3) var(--space-6);
    border-radius: var(--radius-lg);
    border: none;
    font-weight: 500;
    cursor: pointer;
    transition: all var(--transition-normal);
    display: inline-flex;
    align-items: center;
    gap: var(--space-2);
    font-family: var(--font-family);
    text-decoration: none;
}



.btn-secondary {
    background: var(--bg-secondary);
    color: var(--text-primary);
    border: 1px solid var(--border-light);
}

.btn-secondary:hover {
    background: var(--bg-tertiary);
    transform: translateY(-1px);
}

.btn-sm {
    padding: var(--space-2) var(--space-4);
    font-size: var(--font-size-sm);
}

.btn-outline {
    background: transparent;
    color: var(--text-primary);
    border: 1px solid var(--border-medium);
}

.btn-outline:hover {
    background: var(--bg-secondary);
}

/* Pagination */
.pagination {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: var(--space-8);
    padding: var(--space-6) 0;
    border-top: 1px solid var(--border-light);
}

.pagination-info {
    color: var(--text-secondary);
    font-size: var(--font-size-sm);
}

.pagination-controls {
    display: flex;
    align-items: center;
    gap: var(--space-4);
}

.page-info {
    color: var(--text-secondary);
    font-size: var(--font-size-sm);
}

/* Responsive Design */
@media (max-width: 768px) {
    .page-header-content {
        flex-direction: column;
        text-align: center;
        gap: var(--space-4);
    }
    
    .controls-content {
        flex-direction: column;
        gap: var(--space-4);
    }
    
    .search-filters {
        width: 100%;
        justify-content: space-between;
        flex-wrap: wrap;
    }
    
    .search-input {
        width: 200px;
    }
    
    .processes-grid {
        grid-template-columns: 1fr;
    }
    
    .process-stats {
        grid-template-columns: repeat(2, 1fr);
    }
    
    .list-header,
    .process-row {
        grid-template-columns: 1fr;
        gap: var(--space-2);
    }
    
    .list-header {
        display: none;
    }
    
    .process-row {
        padding: var(--space-4);
        border-bottom: 1px solid var(--border-light);
    }
}

@media (max-width: 480px) {
    .search-filters {
        flex-direction: column;
        width: 100%;
    }
    
    .search-input {
        width: 100%;
    }
    
    .filter-select {
        width: 100%;
    }
    
    .header-actions {
        flex-direction: column;
        width: 100%;
    }
    
    .btn {
        width: 100%;
        justify-content: center;
    }
}
</style>

<script>
// View toggle functionality
document.addEventListener('DOMContentLoaded', function() {
    const gridView = document.getElementById('grid-view');
    const listView = document.getElementById('list-view');
    const processesGrid = document.getElementById('processes-grid');
    const processesList = document.getElementById('processes-list');

    if (gridView && listView && processesGrid && processesList) {
        gridView.addEventListener('click', () => {
            gridView.classList.add('active');
            listView.classList.remove('active');
            processesGrid.style.display = 'grid';
            processesList.style.display = 'none';
        });

        listView.addEventListener('click', () => {
            listView.classList.add('active');
            gridView.classList.remove('active');
            processesGrid.style.display = 'none';
            processesList.style.display = 'block';
        });
    }
});
</script>
{% endblock %} 