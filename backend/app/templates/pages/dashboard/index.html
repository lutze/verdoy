{% extends "base.html" %}

{% block title %}Dashboard - Verdoylab{% endblock %}

{% block content %}
<main class="dashboard">
    <!-- Page Header -->
    
    <!-- Summary Statistics -->
    <section class="stats-section">
        <div class="container">
            <div class="stats-grid" 
                 hx-get="/app/dashboard/stats" 
                 hx-trigger="every 30s"
                 hx-swap="innerHTML">
                {% with stats = dashboard.summary_stats %}
                    {% include "partials/dashboard_stats.html" %}
                {% endwith %}
            </div>
        </div>
    </section>

    <!-- Organizations Grid -->
    <section class="organizations-section">
        <div class="container">
            <div class="section-header">
                <h2>Your Organizations</h2>
                <a href="/app/admin/organization/" class="btn btn-secondary">View All</a>
            </div>
            
            <div class="organizations-grid">
                {% for org in dashboard.organizations %}
                <article class="org-card">
                    <div class="org-header">
                        <h3>{{ org.name }}</h3>
                        <span class="org-status {% if org.online_bioreactors > 0 %}online{% else %}offline{% endif %}">
                            {{ org.online_bioreactors }} online
                        </span>
                    </div>
                    
                    <p class="org-description">{{ org.description }}</p>
                    
                    <div class="org-stats">
                        <div class="stat">
                            <span class="stat-value">{{ org.active_experiments }}</span>
                            <span class="stat-label">Active Experiments</span>
                        </div>
                        <div class="stat">
                            <span class="stat-value">{{ org.member_count }}</span>
                            <span class="stat-label">Members</span>
                        </div>
                        <div class="stat">
                            <span class="stat-value">{{ org.online_bioreactors }}</span>
                            <span class="stat-label">Online Bioreactors</span>
                        </div>
                    </div>
                    
                    <div class="org-actions">
                        <a href="/app/admin/organization/{{ org.id }}" class="btn btn-primary">View Details</a>
                        <span class="btn btn-secondary btn-disabled" title="Coming soon">Experiments</span>
                    </div>
                    
                    {% if org.recent_activity %}
                    <div class="org-activity">
                        <h4>Recent Activity</h4>
                        <ul class="activity-list">
                            {% for activity in org.recent_activity[:3] %}
                            <li class="activity-item activity-{{ activity.type }}">
                                <span class="activity-message">{{ activity.message }}</span>
                                <span class="activity-time">{{ activity.time }}</span>
                            </li>
                            {% endfor %}
                        </ul>
                    </div>
                    {% endif %}
                </article>
                {% endfor %}
            </div>
        </div>
    </section>

    <!-- Recent Activity Feed -->
    <section class="activity-section">
        <div class="container">
            <div class="section-header">
                <h2>Recent Activity</h2>
                <button class="btn btn-secondary" 
                        hx-get="/app/dashboard/activity" 
                        hx-target="#activity-feed"
                        hx-swap="innerHTML">
                    Refresh
                </button>
            </div>
            
            <div id="activity-feed" 
                 hx-get="/app/dashboard/activity" 
                 hx-trigger="every 60s"
                 hx-swap="innerHTML">
                {% include "partials/activity_feed.html" %}
            </div>
        </div>
    </section>

    <!-- Quick Actions -->
    <section class="quick-actions">
        <div class="container">
            <h2>Quick Actions</h2>
            <div class="actions-grid">
                <a href="/app/admin/organization/" class="action-card">
                    <div class="action-icon">üè¢</div>
                    <h3>Manage Organizations</h3>
                    <p>View and manage your organizations</p>
                </a>
                
                <a href="/app/projects" class="action-card">
                    <div class="action-icon">üìã</div>
                    <h3>Projects</h3>
                    <p>Create and manage research projects</p>
                </a>
                
                <a href="/app/bioreactors" class="action-card">
                    <div class="action-icon">üî¨</div>
                    <h3>Bioreactor Management</h3>
                    <p>Enroll and monitor bioreactors</p>
                </a>
                
                <span class="action-card action-disabled" title="Coming soon">
                    <div class="action-icon">üß™</div>
                    <h3>Experiments</h3>
                    <p>Create and monitor experiments</p>
                </span>
                
                <span class="action-card action-disabled" title="Coming soon">
                    <div class="action-icon">‚öôÔ∏è</div>
                    <h3>Process Designer</h3>
                    <p>Design experiment processes</p>
                </span>
                
                <span class="action-card action-disabled" title="Coming soon">
                    <div class="action-icon">üìä</div>
                    <h3>Analytics</h3>
                    <p>View data analytics and reports</p>
                </span>
                
                <span class="action-card action-disabled" title="Coming soon">
                    <div class="action-icon">üîî</div>
                    <h3>Alerts</h3>
                    <p>Manage alerts and notifications</p>
                </span>
            </div>
        </div>
    </section>
</main>
{% endblock %} 